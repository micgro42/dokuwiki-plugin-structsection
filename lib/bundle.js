(()=>{"use strict";jQuery((function(){jQuery("#plugin__structsection_output").find(".editbutton_table").remove(),jQuery("#plugin__structsection_output").on("submit","form.btn_secedit",(function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this).parent().prev().find("div.level2"),i=JSINFO.id,n=t.data("struct");if(i&&n){var u=jQuery('<div class="struct_inlineditor"><form></form><div class="err"></div></div>'),p=u.find("form"),r=u.find("div.err").hide(),a=jQuery('<button type="submit">Save</button>'),o=jQuery("<button>Cancel</button>");p.append(jQuery('<input type="hidden" name="pid">').val(i)),p.append(jQuery('<input type="hidden" name="field">').val(n)),p.append('<input type="hidden" name="call" value="plugin_struct_inline_save">'),p.append(jQuery('<div class="ctl">').append(a).append(o)),jQuery.post(DOKU_BASE+"lib/exe/ajax.php",{call:"plugin_struct_inline_editor",pid:i,field:n},(function(e){e&&(p.prepend(e),t.closest(".dokuwiki").append(u),u.position({my:"left top",at:"left top",of:t}),p.find("input, textarea").first().focus())})),p.submit((function(e){e.preventDefault(),jQuery.post(DOKU_BASE+"lib/exe/ajax.php",p.serialize()).done((function(e){t.html(e),u.remove()})).fail((function(e){r.text(e.responseText).show()}))})),o.click((function(e){jQuery.post(DOKU_BASE+"lib/exe/ajax.php",{call:"plugin_struct_inline_cancel",pid:i}),e.preventDefault(),u.remove()}))}}))}))})();